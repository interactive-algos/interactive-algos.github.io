<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interactive Robotics Algorithms</title>
    <style type="text/css">
        canvas {
            border: 1px solid black;
            width: 100%;
            height: auto;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
          crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
          crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <script src="uncertainty/actuation_noise.js"></script>
    <script src="uncertainty/sensor_demo.js"></script>
    <script src="general/js/odometry.js"></script>
    <script src="general/js/utils.js"></script>
    <script src="general/js/view.js"></script>
    <script src="general/js/map_data.js"></script>
    <script src="general/js/measurement.js"></script>
    <script src="measurement/js/measurement_beam_demo.js"></script>
    <script src="general/js/particle.js"></script>
    <script src="motion/js/motion_sim.js"></script>
    <script src="general/js/particle_filter.js"></script>
    <script src="general/js/robot.js"></script>
    <script src='general/js/path_data.js'></script>

    <script>
		var actuationDemo;
		var measurementDemo;
		var sensorDemo;

		function init()
		{
			//Noise parameters
			const a1 = getValue('a1') / 100.0;
			const a2 = getValue('a2') / 100.0;
			const a3 = getValue('a3') / 100.0;
			const a4 = getValue('a4') / 100.0;

			actuationDemo = new ActuationDemo('actuation_demo',
				getValue('dist1'), getValue('turn') / 180 * Math.PI,
				getValue('dist2'), a1, a2, a3, a4);

			measurementDemo = new BeamModelDemo('sensor_model_demo', getMap(), 3, 0.3);
			sensorDemo = new SensorDemo('sensor_demo', 1);
			motionDemo = new MotionDemo(
				'motion_canvas', 'motion_minicanvas',
				getMap(),
				getValue('motion_nParticles'),
				getValue('motion_stride'),
				getValue('a1'), getValue('a2'), getValue('a3'), getValue('a4'), //Noise
			);
		}

		function parameterChanged(event)
		{
			var target = event.target || event.srcElement;
			var value = Number(event.target.value);
			if (target.id === 'dist1')
			{
				actuationDemo.setDist1(value);
			} else if (target.id === 'turn')
			{
				actuationDemo.setTurnAngle(value / 180 * Math.PI);
			} else if (target.id === 'dist2')
			{
				actuationDemo.setDist2(value);
			} else if (target.id === 'a1')
			{
				actuationDemo.setA1(value / 100.0);
			} else if (target.id === 'a2')
			{
				actuationDemo.setA2(value / 100.0);
			} else if (target.id === 'a3')
			{
				actuationDemo.setA3(value / 100.0);
			} else if (target.id === 'a4')
			{
				actuationDemo.setA4(value / 100.0);
			} else if (target.id === 'nLasers')
			{
				measurementDemo.setNLasers(value);
			} else if (target.id === 'sensorRadius')
			{
				measurementDemo.setSensorRadius(value);
			} else if (target.id === 'sensorNoise')
			{
				measurementDemo.setSensorNoise(value);
			} else if (target.id === 'colorRes')
			{
				measurementDemo.setColoringResolution(value);
			} else if (target.id === 'shouldColor')
			{
				measurementDemo.setColoring(target.checked);
			} else if (target.id === 'sensor_demo_sensorNoise')
			{
				sensorDemo.setSensorNoise(value);
			}
		}
    </script>
</head>
<body onload="init();">

<div class="container">
    <div class="row">
        <div class="col-lg-8">
            <h1>Explaining Robotics Interactively</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <blockquote class="blockquote">
                <p>
                    Robotics is the science of perceiving and manipulating the
                    physical world through computer-controlled devices.
                </p>
                <p>
                    Robotics systems are situated in the physical world,
                    perceive information on their environments through sensors,
                    and manipulate through physical forces.
                </p>
                <footer class="blockquote-footer"><cite title="Source Title">Probabilistic
                    Robotics</cite></footer>
            </blockquote>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <h2>Potentials of Robotics</h2>
            <p>
                Examples of successful robotic systems include mobile platforms
                for planetary exploration, industrial robotics arms in assembly
                lines, self-driving cars, and manipulators that assist surgeons.
            </p>
            <p>
                While much of robotics is still in its infancy, the idea of
                “intelligent” manipulating devices has an enormous potential
                to change society. Wouldn’t it be great if all our cars were
                able to safely steer themselves and avoid all car accidents?
                Wouldn’t it be great if robots can clean up nuclear disaster and
                take care of all domestic repair and maintenance tasks?
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <h2>Uncertainties in Robotics</h2>
            <p>
                To do these tasks, robots have to be able to accommodate the
                enormous uncertainty that exists in the physical world. There is
                a number of factors that contribute to a robot’s uncertainty.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
            <h4>Robot Actuation Noise</h4>
            <p>
                Robot actuation involves motors that are, at least to some
                extent, unpredictable. Uncertainty arises from effects like
                control noise, wear-and-tear, and mechanical failure.
            </p>
        </div>

        <div class="col-sm-4">
            <h4>Try the demo</h4>
            <p>
                The blue line represents planned motion while the red line
                represents actual motion. <b>Click</b> anywhere on the canvas to
                place
                the robot. <b>Press and hold</b> to change the direction of
                robot.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
            <canvas id="actuation_demo"></canvas>
        </div>
        <div class="col-sm-4">
            <fieldset>
                <table>
                    <caption>Movement Configuration</caption>
                    <tbody>
                    <tr>
                        <td>
                            <label for="planned">Color for Planned
                                Motion</label>
                        </td>
                        <td><input id="planned" class="form-control"
                                   value="#0000FF" size="4" disabled></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="actual">Color for Actual Motion</label>
                        </td>
                        <td><input id="actual" class="form-control"
                                   value="#FF0000" size="4" disabled></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="dist1">Distance of first move</label>
                        </td>
                        <td>
                            <input id='dist1' size="3" value="1"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="turn">Turn Angle</label>
                        </td>
                        <td>
                            <input id='turn' size="3" value="90"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="dist2">Distance of second move</label>
                        </td>
                        <td>
                            <input id='dist2' size="3" value="1"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
        <div class="col-sm-4">
            <fieldset>
                <table>
                    <caption>Noise Configuration</caption>
                    <tbody>
                    <tr>
                        <td>
                            <label for="a1">Rotational error from rotational
                                motion</label>
                        </td>
                        <td>
                            <input id='a1' size="3" value="1"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="a2">Rotational error from translational
                                motion</label>
                        </td>
                        <td>
                            <input id='a2' size="3" value="1"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="a3">Translational error from
                                translational motion</label>
                        </td>
                        <td>
                            <input id='a3' size="3" value="1"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="a4">Translational error from rotational
                                motion</label>
                        </td>
                        <td>
                            <input id='a4' size="3" value="1"
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'
                                   onblur='return parameterChanged(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>

    <div class="row"><h3>Robot Motion Demo</h3></div>

    <div class='row'>
        <div class="col-lg-8">
            <canvas id="motion_canvas" width="7" height="4"></canvas>
        </div>
        <div class='col-sm-4'>
            <canvas id="motion_minicanvas" width="7" height="4"></canvas>
            <fieldset>
                <legend>Configuration</legend>
                <table>
                    <tbody>
                    <tr>
                        <td></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="path">Movement Path</label>
                        </td>
                        <td>
                            <select id="path" class="selectpicker"
                                    onchange="selectPath(event);">
                                <optgroup label="Built-In">
                                    <option>Vanilla</option>
                                </optgroup>
                                <optgroup label="Custom" id="customPathGroup">
                                    <option data-icon="glyphicon glyphicon-plus"
                                            id="addPath">Add a path
                                    </option>
                                </optgroup>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_nParticles"># of particles</label>
                        </td>
                        <td>
                            <input type='text' id="motion_nParticles"
                                   onblur='motionDemo.setParticleCount(Number(event.target.value))'
                                   onkeypress='return isNumber(event);'
                                   class="form-control" value="500"
                                   size="3 ">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_stride">Step length</label>
                        </td>
                        <td>
                            <input type='text' id="motion_stride"
                                   onblur='motionDemo.setStride(Number(event.target.value));'
                                   onkeypress='return isDecimal(event);'
                                   class="form-control" value="0.04"
                                   size="3">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a1">Rotational error from
                                rotation</label>
                        </td>
                        <td>
                            <input id='motion_a1' size="3" value="1"
                                   onblur='motionDemo.setA1(Number(event.target.value)/100)'
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a2">Rotational error from
                                translation</label>
                        </td>
                        <td>
                            <input id='motion_a2' size="3" value="1"
                                   onblur='motionDemo.setA2(Number(event.target.value)/100)'
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a3">Translational error from
                                translation</label>
                        </td>
                        <td>
                            <input id='motion_a3' size="3" value="1"
                                   onblur='motionDemo.setA3(Number(event.target.value)/100)'
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    <tr>
                        <td>
                            <label for="motion_a4">Translational error from
                                rotation</label>
                        </td>
                        <td>
                            <input id='motion_a4' size="3" value="1"
                                   onblur='motionDemo.setA4(Number(event.target.value)/100)'
                                   type="text" class="form-control"
                                   onkeypress='return isDecimal(event);'>
                        </td>
                        <td><label>%</label></td>
                    </tr>
                    </tbody>
                </table>

                <button onclick="motionDemo.stop()"
                        class="btn btn-danger">
                    <span class="glyphicon glyphicon-stop"
                          aria-hidden="true"></span>
                </button>
                <button onclick="setBackward()" class="btn btn-info">
                    <span class="glyphicon glyphicon-step-backward"
                          aria-hidden="true"></span>
                </button>
                <button onclick="motionDemo.start()" class="btn btn-success">
                    <span class="glyphicon glyphicon-play"
                          aria-hidden="true"></span>
                </button>
                <button onclick="motionDemo.stepForward()" class="btn btn-info">
                    <span class="glyphicon glyphicon-step-forward"
                          aria-hidden="true"></span>
                </button>
            </fieldset>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-4">
            <h4>Sensor Limitations</h4>
            <p>
                Sensors are limited in what they can perceive. Cameras cannot
                see through walls, and the resolution of a camera is limited.
                Sensors are also subject to noise. And finally, sensors can
                break. Detecting a faulty sensor can be extremely difficult.
                Robots take these into accounts and use a sensor model to deal
                with these uncertainties.
            </p>
        </div>
        <div class="col-sm-4">
            <h4>Robot Sensor Noise</h4>
            <p>
                There is always a noise when sensing. Whether the sensor is a
                laser range finder, a sonic sensor or a camera does not matter.
                Click on the button to take sensor readings.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8">
            <canvas id="sensor_demo"></canvas>
        </div>
        <div class="col-sm-4">
            <fieldset>
                <table>
                    <caption>Configuration</caption>
                    <tbody>
                    <tr>
                        <td>
                            <label for="sensor_demo_sensorNoise">Sensor
                                Noise</label>
                        </td>
                        <td>
                            <input id="sensor_demo_sensorNoise" type="text"
                                   onblur='return parameterChanged(event);'
                                   onkeypress='return isDecimal(event);'
                                   class="form-control form-control-sm"
                                   value="0.7">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button type="button" class="btn btn-success"
                                    onclick="sensorDemo.sample(Number(document.getElementById('nSamples').value));">
                                Sense
                            </button>
                        </td>
                        <td><input id="nSamples" type="text"
                                   onkeypress="return isNumber(event);"
                                   class="form-control form-control-sm"
                                   value="100" title="times"></td>
                        <td>times</td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <h4>Simulating Robot Sensor Model</h4>
            <p>This demo is about robot's internal sensor model</p>
            <p>
                Robot's sensors have noises, meaning that measurements are not
                exactly accurate. The robot's internal model must be aware of
                this when estimating its location. <b>Click</b> to place the
                robot, <b>hold and move</b> to change direction of robot.
            </p>
        </div>
        <div class="col-sm-6">
            <fieldset>
                <table>
                    <caption>Configuration</caption>
                    <tbody>
                    <tr>
                        <td>
                            <label for="nLasers">Number of Lasers</label>:
                        </td>
                        <td>
                            <input id="nLasers"
                                   onblur='return parameterChanged(event);'
                                   onkeypress='return isNumber(event);'
                                   class="form-control form-control-sm"
                                   value="18" size="3">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="sensorRadius">Sensor Radius</label>:
                        </td>
                        <td>
                            <input id="sensorRadius"
                                   onblur='return parameterChanged(event);'
                                   onkeypress='return isNumber(event);'
                                   class="form-control form-control-sm"
                                   value="3" size="3">
                        </td>
                        <td>m</td>
                    </tr>
                    <tr>
                        <td>
                            <label for="sensorNoise">Sensor Noise</label>:
                        </td>
                        <td>
                            <input id="sensorNoise"
                                   onblur='return parameterChanged(event);'
                                   onkeypress='return isDecimal(event);'
                                   class="form-control form-control-sm"
                                   value="0.3" size="3">
                        </td>
                        <td>m</td>
                    </tr>
                    <tr>
                        <td>
                            <label for="colorRes">Coloring Resolution</label>:
                        </td>
                        <td>
                            <input id="colorRes"
                                   onblur='return parameterChanged(event);'
                                   class="form-control form-control-sm"
                                   value="10" size="3">
                        </td>
                        <td>pixels</td>
                    </tr>
                    <tr>
                        <td>
                            <label for="shouldColor">Color the Map</label>
                        </td>
                        <td>
                            <input size="3" id="shouldColor"
                                   onchange='return parameterChanged(event);'
                                   type="checkbox">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <canvas id="sensor_model_demo"></canvas>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
            <h4>Inherently Unpredictable Environment</h4>
            <p>
                Let's take self driving car as an example. When driving, it
                is impossible to predict the weather conditions, motion
                dynamics of pedestrians and other cars, traffic lights, or
                car accidents.
            </p>
        </div>
        <div class="col-sm-4">
            <h4>Model Limitations</h4>
            <p>
                Some uncertainty is caused by the robot’s software. All internal
                models of the world are approximate. Models are abstractions of
                the real world. As such, they only partially model the
                underlying physical processes of the robot and its environment.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8">
            <h2>Probabilistic Robotics</h2>
            <p>
                Probabilistic robotics is a relatively new approach to robotics
                that pays tribute to the uncertainty in robot perception and
                action. The key idea in probabilistic robotics is to represent
                information by probability distributions over a whole space of
                guesses instead of a single best guess. By doing so, they can
                represent ambiguity and degree of belief in a mathematically
                sound way.
            </p>
        </div>
    </div>
    <a href="monte_carlo/index.html">Monte Carlo Demo</a>
    <br/>
    <a href="motion/index.html">Motion Demo</a>
</div>
</body>
</html>
